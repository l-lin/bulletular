!function(){"use strict";angular.module("bullet",["ui.keypress"])}(),function(){"use strict";angular.module("bullet").factory("bulletUtils",function(){var a=function(a){return a.length>1?!0:!1},b=function(a){var b=a.slice();return b.splice(0,1),b};return{checkArray:function(a){if(!a||!angular.isArray(a))throw new Error(a+" is not an array!");return this},checkNumber:function(a){if(!a||!angular.isNumber(a))throw new Error(a+" is not a number!");return this},findBulletsArray:function(c,d){if(a(d)){var e=d[0];return this.findBulletsArray(c[e].bullets,b(d))}return c},findBullet:function(a,b){var c=this.findBulletsArray(a,b),d=b[b.length-1];if(c&&d>=0&&d<c.length)return c[d];throw new Error("Bullet not found for indexes "+b)}}})}(),function(){"use strict";angular.module("bullet").factory("bulletFactory",function(){return{newBullet:function(a,b,c,d,e){return{index:a||[0],text:b||"",focus:c||!1,complete:d||!1,bullets:e||[]}}}})}(),function(){"use strict";angular.module("bullet").directive("bulFocusme",function(){return{restrict:"A",scope:{trigger:"=bulFocusme"},link:function(a,b){a.$watch("trigger",function(c){c===!0&&(b[0].focus(),a.trigger=!1)})}}}),angular.module("bullet").directive("bullets",["bulletFactory","bulletUtils",function(a,b){var c=function(a,c){b.checkArray(a);var d=a.slice();return c&&angular.isNumber(c)&&(d[d.length-1]=d[d.length-1]+c),d},d=function e(a,b){var c;if(a)for(c=0;c<a.length;c++){var d;d=b?b.slice():[],d.push(c),a[c].index=d,e(a[c].bullets,d)}};return{restrict:"E",templateUrl:"app/bullet/templates/bullets.html",scope:{bullets:"="},link:function(e){var f;e.$watch("bullets",function(a){d(a)},!0),e.selectBullet=function(a,d){var g=c(a,d);try{var h=b.findBullet(e.bullets,g);f&&(f.focus=!1),h.focus=!0,f=h}catch(i){}},e.addBullet=function(d,f){var g=b.findBulletsArray(e.bullets,f.slice()),h=c(f,1),i=h[h.length-1];b.checkArray(g),g.splice(i,0,a.newBullet()),e.selectBullet(h),d.preventDefault()},e.completeBullet=function(a,c){var d=b.findBullet(e.bullets,c);d.complete=!d.complete,a.preventDefault()},e.removeBullet=function(c,d){var f=d[d.length-1],g=b.findBulletsArray(e.bullets,d.slice()),h=[0];g.splice(f,1),e.bullets.length||e.bullets.push(a.newBullet()),g[f]?(h=d.slice(),h[h.length-1]=f):g[f-1]&&(h=d.slice(),h[h.length-1]=f-1),e.selectBullet(h),c.preventDefault()},e.toSubBullet=function(a,c){var d=c.slice(),f=b.findBulletsArray(e.bullets,d),g=b.findBullet(e.bullets,d),h=c[c.length-1],i=h-1,j=f[i];j&&(j.bullets.push(g),f.splice(h,1),d=j.index,d.push(j.bullets.length-1),e.selectBullet(d)),a.preventDefault()},e.toBullet=function(a,c){var d=c.slice(),f=b.findBulletsArray(e.bullets,d),g=b.findBullet(e.bullets,d),h=c[c.length-1];d.pop();var i=b.findBulletsArray(e.bullets,d),j=d[d.length-1]+1;j&&(f.splice(h,1),i.splice(j,0,g),d[d.length-1]=j,e.selectBullet(d)),a.preventDefault()}}}}])}(),function(){"use strict";angular.module("bulletularApp",["bullet","ngAnimate"])}(),function(){"use strict";angular.module("bulletularApp").controller("bulletularCtrl",["$scope","$log","$timeout","bulletFactory",function(a,b,c,d){var e,f="bullets";if(angular.isDefined(localStorage)){var g=localStorage.getItem(f);e=null===g||angular.isUndefined(g)?[d.newBullet()]:JSON.parse(g)}else e=[d.newBullet([0],"Developing with AngularJS",!0,!0),d.newBullet([1],"Add sub tasks",!1,!0,[d.newBullet([1,0],"Increase indent",!1,!0),d.newBullet([1,1],"Decrease indent",!1,!0)]),d.newBullet([2],"Add a shortcut to clean all complete tasks",!1,!1),d.newBullet([3],"Add localStorage for saving tasks",!1,!1),d.newBullet([4],"Add the possibility to navigate through tasks",!1,!1),d.newBullet([5],"Add breadcrumb",!1,!1)];a.bullets=e,a.isSaved=!1,a.save=function(){b.debug("Saving..."),localStorage.setItem(f,JSON.stringify(a.bullets)),a.isSaved=!0,c(function(){a.isSaved=!1},3e3)},a.removeAllBullets=function(){localStorage.removeItem(f),a.bullets=[d.newBullet()]},a.closeMsg=function(){a.isSaved=!1}}])}();